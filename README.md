# G7-32 template

Данный шаблон разработан для оформления отчетов о НИР, расчетно-пояснительных записок к курсовым и дипломным работам в соответствии с ГОСТ 7.32-2017 и демонстрирует возможности стиля [G7-32](https://github.com/afaikiac/G7-32).

## Структура

```palin
latex-g7-32
├── res 
│       изображения, исходные файлы для листингов, библиография
├── lib
│       пакеты и макросы LaTeX
├── lib/G7-32/tex 
│       LaTeX-файлы стилей и классов для стандарта GOST 7.32
├── lib/GOST/bibtex/bst/gost
│       стили библиографии для оформления по GOST
├── tex 
│       исходные файлы LaTeX
├── .latexmkrc
│       конфигурация для утилиты latexmk, которая задает
│       переменные среды и определяет настройки сборки документа
└── main.tex 
        основной файл LaTeX, который включает
        структуру документа и вызовы других файлов
```

## Сборка

Здесь перечислены возможные удобные варианты, как можно собрать документ с помощью `latexmk`. Вы можете комбинировать их или придумать свой.

### Overleaf

Скачайте [архив](https://github.com/afaikiac/latex-g7-32/releases/latest/download/latex-g7-32-overleaf.zip) из последнего релиза и импортируйте его как новый проект в Overleaf. Подробнее: [how to upload a project](https://www.overleaf.com/learn/how-to/Uploading_a_project).

> **Note**
>
> Чтобы использовать XeLaTeX вместо pdfLaTeX, в меню проекта измените компилятор на `XeLaTeX`. Подробнее: [changing compiler](https://www.overleaf.com/learn/how-to/Changing_compiler).

### Docker

```bash
git clone --recurse-submodules https://github.com/afaikiac/latex-g7-32.git
```

```bash
cd latex-g7-32
```

```bash
IMAGE="ghcr.io/afaikiac/latex-g7-32:overleaf"
```

```bash
WORKDIR="/doc"
```

#### XeLaTeX

```bash
docker run --rm -i --user="$(id -u):$(id -g)" --net=none -v "$(pwd)":"$WORKDIR" "$IMAGE" latexmk -pdfxe
```

#### pdfLaTeX

```bash
docker run --rm -i --user="$(id -u):$(id -g)" --net=none -v "$(pwd)":"$WORKDIR" "$IMAGE" latexmk -pdf
```

> **Note**
> 
> Не забывайте о сабмодулях `lib/G7-32` и `lib/GOST`. Их нужно учитывать при работе с `git`.

### GitHub Action

1. Создайте новый репозиторий `Use this template -> Create a new repository`.

2. Измените разрешения для `GITHUB_TOKEN` на **read and write**. Подробнее: [setting the permissions of the `GITHUB_TOKEN` for your repository](https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/enabling-features-for-your-repository/managing-github-actions-settings-for-a-repository#setting-the-permissions-of-the-github_token-for-your-repository).

3. Сделайте коммит в основную ветку, которая называется `main` или `master`.

**Поздравляем!** Создается новый `Draft` релиз с PDF во вложениях.

> **Note**
>
> В [build.yml](https://github.com/afaikiac/latex-g7-32/blob/main/.github/workflows/build.yml#L3) можно найти переменные среды:
>
> ```yml
> env:
>   RUN_LATEXMK_XELATEX: true
>   RUN_LATEXMK_PDFLATEX: true
>   CREATE_OVERLEAF_ARCHIVE: true
> ```
>
> Изменяя их, можно контролировать, что именно будет собираться в `Draft` релиз.

## Полезное

### G7-32

- Можно использовать свободный аналог Times New Roman — [PT Astra Serif](http://astralinux.ru/information/fonts-astra/font-ptastra-serif-ver1003.zip) и [PT Astra Sans](http://astralinux.ru/information/fonts-astra/font-ptastrasans-ttf-ver1002.zip). Подробнее: [опции класса документа](https://github.com/afaikiac/latex-g7-32/tree/G7-32#%D0%BE%D0%BF%D1%86%D0%B8%D0%B8-%D0%BA%D0%BB%D0%B0%D1%81%D1%81%D0%B0-%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0).

- Кратко о различиях XeLaTeX и pdfLaTeX: [other compilers](https://www.overleaf.com/learn/latex/Choosing_a_LaTeX_Compiler#Other_compilers).

### Git

[Документация](https://git-scm.com/book/en/v2/Git-Tools-Submodules) по работе с submodules.

```bash
# Инициализировать и обновить submodules
git submodule update --init
```

```bash
# Oбновить submodules из upstream
git submodule update --remote
```

### Latexmk

[Mануал](https://manpages.debian.org/testing/latexmk/latexmk.1.en.html) по `latexmk`.

```plain
-с
    Clean up (remove) all regeneratable files generated by
    latex and bibtex or biber except dvi, postscript and pdf.

      latexmk -pdfxe -c
      latexmk -pdf -c
```

### Инструменты

...
